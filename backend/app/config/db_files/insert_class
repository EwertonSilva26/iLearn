DELIMITER $$
CREATE PROCEDURE insert_class (className varchar(100), classCode varchar(100), userId INT)
BEGIN
	DECLARE classId INT;

	INSERT INTO tb_class (class_name, class_code) VALUES (className, classCode);
	
    SELECT id_class FROM tb_class WHERE class_name = className INTO classId;

	SET FOREIGN_KEY_CHECKS=0;
	INSERT INTO tb_teacher_class (id_teacher, id_class) VALUES (userId, classId);
END $$
DELIMITER ;